<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Projection Chart</title>
  <script type="text/javascript" src="js/d3/d3.min.js"></script>
  <script type="text/javascript" src="js/d3/components/d3-axis.min.js"></script>
  <script type="text/javascript" src="js/d3/components/d3-time-format.min.js"></script>
  <script type="text/javascript" src="js/util.js"></script>
  <script type="text/javascript" src="js/projection.js"></script>
  <script type="text/javascript">
    util.ready(function() {
      var data1 = util.generateDummyData();
      var data2 = util.generateDummyData();

      var chart1 = d3.projectionChart()
        .data(data1)
        .width(500)
        .height(500)

      var chart2 = d3.projectionChart()
        .data(data2)
        .width(200)
        .height(200)

      var chart1D3 = d3.select(".chart1").call(chart1);
      var chart2D3 = d3.select(".chart2").call(chart2);

      flexableSize(chart1D3, chart1);
      flexableSize(chart2D3, chart2);

      function flexableSize(d3Chart, projectionChart) {
        d3Chart.each(function(element) {
          projectionChart.width(
            this.getBoundingClientRect().width
          );
        });
      }

      window.addEventListener('resize', util.throttle(function() {
        // On window resize, rerender the chart so it fills
        // it's parent element.
        flexableSize(chart1D3, chart1);
        flexableSize(chart2D3, chart2);

      }), 80);
    })

  </script>
  <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css"/>

</head>
<body>

<div class="container">
  <div class="row">
    <div class="col-lg-9">
      <div style="border:1px solid black" class="chart1"></div>
    </div>
    <div class="col-lg-3">
      <div style="border:1px solid black" class="chart2"></div>
    </div>
  </div>
</div>

</body>
</html>
